(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{2264:function(e,t,a){Promise.resolve().then(a.bind(a,7255))},7255:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var s=a(288),n=a(5192),r=a(1676),i=a(7719),l=a(1782),o=a(9205),d=a(6835),c=a(3704),u=a(2608),m=a(5415),x=a(9618),p=a(6021);let h=(0,p.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=a(7393),g=a(2352),v=a(1350);let j=(0,p.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=(0,p.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var b=a(2203),N=a(1207),k=a(8902),w=a(3320);function _(){var e,t,a,p,_,C,S;let A=(0,w.useRouter)(),T=(0,w.useSearchParams)(),{toast:Z}=(0,k.pm)(),[E,P]=(0,n.useState)([]),[z,R]=(0,n.useState)([]),[I,O]=(0,n.useState)(!0),[D,M]=(0,n.useState)(""),[B,Q]=(0,n.useState)("all"),[V,F]=(0,n.useState)("all"),[L,U]=(0,n.useState)(null),[W,Y]=(0,n.useState)(null);(0,n.useEffect)(()=>{H();let e=T.get("id"),t=T.get("action");if(e&&t){Y(t);let a=E.find(t=>t.id.toString()===e);a&&U(a)}},[T,E]),(0,n.useEffect)(()=>{J()},[E,D,B,V]);let H=async()=>{try{let e=localStorage.getItem("admin_token"),t=await fetch("/api/admin/bookings.php",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();P(e.data||e.bookings||[])}}catch(e){console.error("Failed to fetch bookings:",e)}finally{O(!1)}},J=()=>{let e=E;D&&(e=e.filter(e=>e.from_location.toLowerCase().includes(D.toLowerCase())||e.to_location.toLowerCase().includes(D.toLowerCase())||e.service.toLowerCase().includes(D.toLowerCase()))),"all"!==B&&(e=e.filter(e=>e.status===B)),"all"!==V&&(e=e.filter(e=>e.service===V)),R(e)},$=e=>(0,s.jsx)(d.C,{className:{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"}[e]||"bg-gray-100 text-gray-800",children:e.charAt(0).toUpperCase()+e.slice(1)}),q=e=>(0,s.jsx)(d.C,{className:{pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",partial:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800",children:e.charAt(0).toUpperCase()+e.slice(1)}),G=e=>{let t=E.find(t=>t.id===e);t&&(U(t),Y("view"))},X=e=>{let t=E.find(t=>t.id===e);t&&(U(t),Y("edit"))},K=()=>{U(null),Y(null),A.push("/admin/bookings")},ee=async e=>{if(confirm("Are you sure you want to delete this booking?"))try{let t=localStorage.getItem("admin_token");(await fetch("/api/admin/bookings.php",{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok?(Z({title:"Success",description:"Booking deleted successfully"}),H()):Z({title:"Error",description:"Failed to delete booking",variant:"destructive"})}catch(e){Z({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}},et=async()=>{if(L)try{var e,t,a,s;let n=localStorage.getItem("admin_token");(await fetch("/api/admin/bookings.php",{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({id:L.id,service:L.service,from_location:L.from_location,to_location:L.to_location,travel_date:L.travel_date,booking_date:L.booking_date,passengers:L.passengers,amount:L.amount,total_amount:null!==(e=L.total_amount)&&void 0!==e?e:L.amount,paid_amount:null!==(t=L.paid_amount)&&void 0!==t?t:0,pending_amount:(null!==(a=L.total_amount)&&void 0!==a?a:L.amount)-(null!==(s=L.paid_amount)&&void 0!==s?s:0),status:L.status,payment_status:L.payment_status,notes:L.notes})})).ok?(Z({title:"Success",description:"Booking updated successfully"}),H(),K()):Z({title:"Error",description:"Failed to update booking",variant:"destructive"})}catch(e){Z({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}},ea=async()=>{if(L)try{var e,t,a,s,n,r,i;let l=localStorage.getItem("admin_token"),o=Math.max((null!==(t=null!==(e=L.total_amount)&&void 0!==e?e:L.amount)&&void 0!==t?t:0)-(null!==(a=L.paid_amount)&&void 0!==a?a:0),0);(await fetch("/api/admin/bookings.php",{method:"PUT",headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"},body:JSON.stringify({id:L.id,total_amount:null!==(n=null!==(s=L.total_amount)&&void 0!==s?s:L.amount)&&void 0!==n?n:0,paid_amount:null!==(r=L.paid_amount)&&void 0!==r?r:0,pending_amount:o,payment_status:null!==(i=L.payment_status)&&void 0!==i?i:"pending",service:L.service,from_location:L.from_location,to_location:L.to_location,travel_date:L.travel_date,booking_date:L.booking_date,passengers:L.passengers,amount:L.amount,status:L.status,notes:L.notes})})).ok?(Z({title:"Success",description:"Payment updated successfully"}),H(),K()):Z({title:"Error",description:"Failed to update payment",variant:"destructive"})}catch(e){Z({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}},es=async(e,t)=>{try{var a,s,n;let r=localStorage.getItem("admin_token"),i=E.find(t=>t.id===e);if(!i)return;(await fetch("/api/admin/bookings.php",{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({id:e,service:i.service,from_location:i.from_location,to_location:i.to_location,travel_date:i.travel_date,booking_date:i.booking_date,passengers:i.passengers,amount:i.amount,total_amount:null!==(a=i.total_amount)&&void 0!==a?a:i.amount,paid_amount:null!==(s=i.paid_amount)&&void 0!==s?s:0,pending_amount:null!==(n=i.pending_amount)&&void 0!==n?n:0,status:t,payment_status:i.payment_status,notes:i.notes})})).ok?(Z({title:"Success",description:"Booking status updated successfully"}),H()):Z({title:"Error",description:"Failed to update booking status",variant:"destructive"})}catch(e){Z({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}};return I?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Bookings Management"})}),(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Bookings Management"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage all customer bookings"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.z,{onClick:()=>{if(0===z.length){Z({title:"No Data",description:"No bookings to export",variant:"destructive"});return}let e=new Blob([["ID,Service,From,To,Travel Date,Booking Date,Passengers,Total Amount,Paid Amount,Pending Amount,Status,Payment Status,Notes,Created At",...z.map(e=>[e.id,e.service,'"'.concat(e.from_location,'"'),'"'.concat(e.to_location,'"'),e.travel_date,e.booking_date||"",e.passengers,e.total_amount||e.amount,e.paid_amount||0,e.pending_amount||0,e.status,e.payment_status,'"'.concat(e.notes||"",'"'),e.created_at].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),a=URL.createObjectURL(e);t.setAttribute("href",a),t.setAttribute("download","bookings-".concat(new Date().toISOString().split("T")[0],".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),Z({title:"Export Successful",description:"Exported ".concat(z.length," bookings")})},children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,s.jsxs)(i.z,{onClick:()=>A.push("/admin/customers/add"),children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Add Booking"]}),(0,s.jsxs)(i.z,{variant:"outline",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Calendar View"]})]})]}),(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(l.I,{placeholder:"Search bookings...",value:D,onChange:e=>M(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)(o.Ph,{value:B,onValueChange:Q,children:[(0,s.jsx)(o.i4,{className:"w-full md:w-48",children:(0,s.jsx)(o.ki,{placeholder:"All Status"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All Status"}),(0,s.jsx)(o.Ql,{value:"pending",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(o.Ql,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(o.Ql,{value:"completed",children:"Completed"})]})]}),(0,s.jsxs)(o.Ph,{value:V,onValueChange:F,children:[(0,s.jsx)(o.i4,{className:"w-full md:w-48",children:(0,s.jsx)(o.ki,{placeholder:"All Services"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All Services"}),(0,s.jsx)(o.Ql,{value:"train",children:"Train"}),(0,s.jsx)(o.Ql,{value:"bus",children:"Bus"}),(0,s.jsx)(o.Ql,{value:"flight",children:"Flight"}),(0,s.jsx)(o.Ql,{value:"cab",children:"Cab"})]})]}),(0,s.jsxs)(i.z,{variant:"outline",children:[(0,s.jsx)(h,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})})}),(0,s.jsx)("div",{className:"space-y-4",children:z.length>0?z.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["#",e.id," - ",e.service.charAt(0).toUpperCase()+e.service.slice(1)]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[$(e.status),q(e.payment_status)]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm",children:new Date(e.travel_date).toLocaleDateString()})]}),e.booking_date&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm",children:["Booked: ",new Date(e.booking_date).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm",children:[e.passengers," passenger(s)"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"text-sm font-medium",children:["₹",(e.total_amount||e.amount).toLocaleString(),e.paid_amount&&e.paid_amount>0&&(0,s.jsxs)("span",{className:"text-green-600 ml-1",children:["(Paid: ₹",e.paid_amount.toLocaleString(),")"]})]})})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:"Route Details"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"From:"}),(0,s.jsx)("span",{children:e.from_location})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"To:"}),(0,s.jsx)("span",{children:e.to_location})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:"Customer Details"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,s.jsx)("span",{children:e.customer_name||"Not provided"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,s.jsx)("span",{children:e.customer_phone||"Not provided"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,s.jsx)("span",{children:e.customer_email||"Not provided"})]})]})]}),e.passenger_details&&e.passenger_details.length>0&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:"Passenger Details"})]}),(0,s.jsx)("div",{className:"space-y-2",children:e.passenger_details.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm p-2 bg-white rounded border",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Passenger ",t+1]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Name:"})," ",e.name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Age:"})," ",e.age]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Gender:"})," ",e.gender]})]})]},t))})]}),e.train_number&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:"Train Details"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Train:"}),(0,s.jsx)("span",{children:e.train_name||e.train_number})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Class:"}),(0,s.jsx)("span",{children:e.class||"Not specified"})]}),e.departure_time&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Departure:"}),(0,s.jsx)("span",{children:e.departure_time})]}),e.arrival_time&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Arrival:"}),(0,s.jsx)("span",{children:e.arrival_time})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>G(e.id),children:(0,s.jsx)(j,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>X(e.id),children:(0,s.jsx)(y,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>ee(e.id),children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)(o.Ph,{value:e.status,onValueChange:t=>es(e.id,t),children:[(0,s.jsx)(o.i4,{className:"w-full",children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"pending",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(o.Ql,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(o.Ql,{value:"completed",children:"Completed"})]})]})]})]})})})},e.id)):(0,s.jsx)(r.Zb,{children:(0,s.jsxs)(r.aY,{className:"p-12 text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4",children:(0,s.jsx)(m.Z,{className:"h-12 w-12 mx-auto"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bookings found"}),(0,s.jsx)("p",{className:"text-gray-600",children:D||"all"!==B||"all"!==V?"Try adjusting your filters to see more results.":"No bookings have been created yet."})]})})}),L&&W&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold",children:["edit"===W?"Edit Booking":"View Booking"," - #",L.id]}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:K,children:(0,s.jsx)(N.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Service"}),(0,s.jsx)(l.I,{value:L.service,disabled:"view"===W,onChange:e=>U({...L,service:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,s.jsxs)(o.Ph,{value:L.status,disabled:"view"===W,onValueChange:e=>U({...L,status:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"pending",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(o.Ql,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(o.Ql,{value:"completed",children:"Completed"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From"}),(0,s.jsx)(l.I,{value:L.from_location,disabled:"view"===W,onChange:e=>U({...L,from_location:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To"}),(0,s.jsx)(l.I,{value:L.to_location,disabled:"view"===W,onChange:e=>U({...L,to_location:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Travel Date"}),(0,s.jsx)(l.I,{type:"date",value:L.travel_date,disabled:"view"===W,onChange:e=>U({...L,travel_date:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Booking Date"}),(0,s.jsx)(l.I,{type:"date",value:L.booking_date||"",disabled:"view"===W,onChange:e=>U({...L,booking_date:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Passengers"}),(0,s.jsx)(l.I,{type:"number",value:L.passengers,disabled:"view"===W,onChange:e=>U({...L,passengers:parseInt(e.target.value)})})]})]}),(0,s.jsxs)("div",{className:"mt-2 p-4 border rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Total Amount"}),(0,s.jsx)(l.I,{type:"number",value:(null!==(t=null!==(e=L.total_amount)&&void 0!==e?e:L.amount)&&void 0!==t?t:0).toString(),disabled:"view"!==W&&!1,onChange:e=>{var t;let a=parseFloat(e.target.value||"0"),s=null!==(t=L.paid_amount)&&void 0!==t?t:0;U({...L,total_amount:a,pending_amount:Math.max(a-s,0)})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Paid Amount (Advance)"}),(0,s.jsx)(l.I,{type:"number",value:(null!==(a=L.paid_amount)&&void 0!==a?a:0).toString(),disabled:"view"!==W&&!1,onChange:e=>{var t,a;let s=parseFloat(e.target.value||"0"),n=null!==(a=null!==(t=L.total_amount)&&void 0!==t?t:L.amount)&&void 0!==a?a:0;U({...L,paid_amount:s,pending_amount:Math.max(n-s,0)})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Pending Amount"}),(0,s.jsx)(l.I,{type:"number",value:(null!==(S=L.pending_amount)&&void 0!==S?S:Math.max((null!==(_=null!==(p=L.total_amount)&&void 0!==p?p:L.amount)&&void 0!==_?_:0)-(null!==(C=L.paid_amount)&&void 0!==C?C:0),0)).toString(),disabled:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Payment Status"}),(0,s.jsxs)(o.Ph,{value:L.payment_status,onValueChange:e=>U({...L,payment_status:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"pending",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"paid",children:"Paid"}),(0,s.jsx)(o.Ql,{value:"refunded",children:"Refunded"})]})]})]})]}),"view"===W&&(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(i.z,{onClick:ea,children:"Update Payment"}),(0,s.jsx)(i.z,{variant:"outline",onClick:K,children:"Close"})]})]}),"edit"===W&&(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(i.z,{onClick:et,children:"Save Changes"}),(0,s.jsx)(i.z,{variant:"outline",onClick:K,children:"Cancel"})]})]})]})})})]})}},6835:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var s=a(288);a(5192);var n=a(7940),r=a(6056);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)(i({variant:a}),t),...n})}},7719:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var s=a(288),n=a(5192),r=a(8996),i=a(7940),l=a(6056);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:a})),ref:t,...c})});d.displayName="Button"},1676:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var s=a(288),n=a(5192),r=a(6056);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},1782:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(288),n=a(5192),r=a(6056);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},9205:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return f},i4:function(){return m},ki:function(){return u}});var s=a(288),n=a(5192),r=a(2912),i=a(9590),l=a(4773),o=a(7962),d=a(6056);let c=r.fC;r.ZA;let u=r.B4,m=n.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,s.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[n,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=r.$G.displayName;let h=n.forwardRef((e,t)=>{let{className:a,children:n,position:i="popper",...l}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(p,{})]})})});h.displayName=r.VY.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=r.__.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(r.eT,{children:n})]})});f.displayName=r.ck.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=r.Z0.displayName},8902:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(5192);let n=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6056:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(9773),n=a(7009);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}},6021:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(5192);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...i,width:n,height:n,stroke:a,strokeWidth:o?24*Number(l)/Number(n):l,className:r("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:o,...d}=a;return(0,s.createElement)(l,{ref:i,iconNode:t,className:r("lucide-".concat(n(e)),o),...d})});return a.displayName="".concat(e),a}},3704:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2608:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9618:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1350:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]])},2203:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7393:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1207:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(6021).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3320:function(e,t,a){"use strict";var s=a(373);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},8911:function(e,t,a){"use strict";a.d(t,{F:function(){return r},e:function(){return i}});var s=a(5192);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function r(...e){return t=>{let a=!1,s=e.map(e=>{let s=n(e,t);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let t=0;t<s.length;t++){let a=s[t];"function"==typeof a?a():n(e[t],null)}}}}function i(...e){return s.useCallback(r(...e),e)}},8996:function(e,t,a){"use strict";a.d(t,{g7:function(){return i}});var s=a(5192),n=a(8911),r=a(288),i=s.forwardRef((e,t)=>{let{children:a,...n}=e,i=s.Children.toArray(a),o=i.find(d);if(o){let e=o.props.children,a=i.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,r.jsx)(l,{...n,ref:t,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,r.jsx)(l,{...n,ref:t,children:a})});i.displayName="Slot";var l=s.forwardRef((e,t)=>{let{children:a,...r}=e;if(s.isValidElement(a)){let e,i;let l=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref;return s.cloneElement(a,{...function(e,t){let a={...t};for(let s in t){let n=e[s],r=t[s];/^on[A-Z]/.test(s)?n&&r?a[s]=(...e)=>{r(...e),n(...e)}:n&&(a[s]=n):"style"===s?a[s]={...n,...r}:"className"===s&&(a[s]=[n,r].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props),ref:t?(0,n.F)(t,l):l})}return s.Children.count(a)>1?s.Children.only(null):null});l.displayName="SlotClone";var o=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});function d(e){return s.isValidElement(e)&&e.type===o}},7940:function(e,t,a){"use strict";a.d(t,{j:function(){return i}});var s=a(9773);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=s.W,i=(e,t)=>a=>{var s;if((null==t?void 0:t.variants)==null)return r(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],s=null==l?void 0:l[e];if(null===t)return null;let r=n(t)||n(s);return i[e][r]}),d=a&&Object.entries(a).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return r(e,o,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:a,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...l,...d}[t]):({...l,...d})[t]===a})?[...e,a,s]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}},function(e){e.O(0,[517,189,966,24,240,744],function(){return e(e.s=2264)}),_N_E=e.O()}]);