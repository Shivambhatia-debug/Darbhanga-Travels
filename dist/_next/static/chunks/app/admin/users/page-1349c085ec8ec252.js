(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{2169:function(e,t,s){Promise.resolve().then(s.bind(s,7849))},7849:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(288),a=s(5192),n=s(1676),i=s(7719),l=s(1782),c=s(3704),d=s(2608),o=s(9618),u=s(7393),m=s(2370),x=s(8202),f=s(5415),h=s(1897),g=s(3320);function p(){let e=(0,g.useRouter)(),[t,s]=(0,a.useState)([]),[p,v]=(0,a.useState)([]),[y,j]=(0,a.useState)(!0),[N,b]=(0,a.useState)("");(0,a.useEffect)(()=>{w()},[]),(0,a.useEffect)(()=>{k()},[t,N]);let w=async()=>{try{let e=localStorage.getItem("admin_token"),t=await fetch("/api/admin/customers.php",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e.customers||e.data||[])}}catch(e){console.error("Failed to fetch customers:",e)}finally{j(!1)}},k=()=>{let e=t;N&&(e=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())||e.phone.includes(N)||e.email.toLowerCase().includes(N.toLowerCase()))),v(e)};return y?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"})]}),(0,r.jsx)("div",{className:"grid gap-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-24 bg-gray-200 rounded animate-pulse"},t))})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Customer Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all customer accounts"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,r.jsxs)(i.z,{variant:"outline",onClick:()=>e.push("/admin/customers/add-customer-only"),children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Customer Only"]}),(0,r.jsxs)(i.z,{onClick:()=>e.push("/admin/customers/add"),children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Customer & Booking"]})]})]}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(l.I,{placeholder:"Search customers...",value:N,onChange:e=>b(e.target.value),className:"pl-10"})]})})}),(0,r.jsx)("div",{className:"space-y-4",children:p.length>0?p.map((e,t)=>(0,r.jsx)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Customer ID: #",e.id]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-sm",children:e.phone})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-sm",children:e.email||"N/A"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("span",{className:"text-sm",children:["Joined ",new Date(e.created_at).toLocaleDateString()]})]})]}),e.address&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("strong",{children:"Address:"})," ",e.address]})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.total_bookings}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Bookings"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-xl font-semibold text-green-600",children:["â‚¹",e.total_spent.toLocaleString()]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Spent"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.z,{size:"sm",variant:"outline",children:"View Bookings"}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",children:"Edit"})]})]})]})})})},e.id)):(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)(u.Z,{className:"h-12 w-12 mx-auto"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),(0,r.jsx)("p",{className:"text-gray-600",children:N?"Try adjusting your search to see more results.":"No customers have registered yet."})]})})})]})}},7719:function(e,t,s){"use strict";s.d(t,{d:function(){return c},z:function(){return d}});var r=s(288),a=s(5192),n=s(8996),i=s(7940),l=s(6056);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:s})),ref:t,...o})});d.displayName="Button"},1676:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var r=s(288),a=s(5192),n=s(6056);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},1782:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(288),a=s(5192),n=s(6056);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},6056:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(9773),a=s(7009);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},5415:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3704:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8202:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2370:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},2608:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9618:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7393:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[517,983,24,240,744],function(){return e(e.s=2169)}),_N_E=e.O()}]);