(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{6170:function(e,s,t){Promise.resolve().then(t.bind(t,4877))},4877:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(288),r=t(5192),n=t(3320),i=t(1676),o=t(7719),l=t(4497),d=t(1350),c=t(8202),u=t(1897),m=t(8902);function p(){let e=(0,n.useRouter)(),{toast:s}=(0,m.pm)(),[t,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let s=localStorage.getItem("bookingInfo");s?p(JSON.parse(s)):e.push("/")},[e]);let[f,h]=(0,r.useState)(!1),x=async()=>{if(t){h(!0);try{var a,r;let n=(t.fare||0)*parseInt(t.passengers||"1"),i={service:"train",from:t.from,to:t.to,date:new Date(t.date).toISOString().split("T")[0],passengers:t.passengers,customer_name:(null===(r=t.passengerDetails)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.name)||"Customer",customer_phone:t.phone||"",customer_email:t.email||"",amount:n,total_amount:n,paid_amount:0,pending_amount:n,status:"pending",payment_status:"pending",notes:"Train: ".concat(t.trainName||t.train||"Not Selected"," (").concat(t.train||"","), Class: ").concat(t.class,", Departure: ").concat(t.departureTime,", Arrival: ").concat(t.arrivalTime),passenger_details:t.passengerDetails||[],train_number:t.train||"",train_name:t.trainName||"",class:t.class||"",departure_time:t.departureTime||"",arrival_time:t.arrivalTime||"",duration:t.duration||"",fare_per_person:t.fare||0},o=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),l=await o.json();o.ok?(s({title:"Booking Submitted Successfully! \uD83C\uDF89",description:"Your booking request has been sent. We'll contact you soon."}),localStorage.removeItem("bookingInfo"),setTimeout(()=>{e.push("/")},2e3)):s({title:"Error",description:l.message||"Failed to submit booking",variant:"destructive"})}catch(e){s({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}finally{h(!1)}}};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-12 px-4",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)(o.z,{variant:"ghost",className:"mb-6",onClick:()=>e.push("/"),children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),(0,a.jsxs)(i.Zb,{className:"shadow-xl border-0",children:[(0,a.jsx)(i.Ol,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{className:"text-2xl",children:"Train Booking Details"}),(0,a.jsx)("p",{className:"text-white/80 mt-1",children:"Review and confirm your booking"})]})]})}),(0,a.jsxs)(i.aY,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Journey Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"From:"})," ",t.from]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"To:"})," ",t.to]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(t.date).toLocaleDateString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Class:"})," ",t.class]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Train:"})," ",t.train||"Not Selected"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Passenger Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Passengers:"})," ",t.passengers]}),t.passengerDetails&&t.passengerDetails.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Passenger ",s+1]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Name:"})," ",e.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Age:"})," ",e.age," years"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Gender:"})," ",e.gender]})]},s))]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Phone:"})," ",t.phone||"Not provided"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",t.email||"Not provided"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Fare Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Class:"})," ",t.class]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Fare per person:"})," ₹",t.fare||0]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Fare:"})," ₹",(t.fare||0)*parseInt(t.passengers||"1")]})]})]}),(0,a.jsx)("div",{className:"pt-6 border-t",children:(0,a.jsx)(o.z,{className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-6 text-lg shadow-xl hover:shadow-2xl transition-all duration-300",onClick:x,disabled:f,children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Submit Booking Request"]})})})]})]})]})})}):null}},7719:function(e,s,t){"use strict";t.d(s,{d:function(){return l},z:function(){return d}});var a=t(288),r=t(5192),n=t(8996),i=t(7940),o=t(6056);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:r,size:i,className:t})),ref:s,...c})});d.displayName="Button"},1676:function(e,s,t){"use strict";t.d(s,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=t(288),r=t(5192),n=t(6056);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},8902:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var a=t(5192);let r=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},o=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(d);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6056:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(9773),r=t(7009);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}},4497:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6021).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8202:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6021).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1350:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(6021).Z)("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]])}},function(e){e.O(0,[517,983,24,240,744],function(){return e(e.s=6170)}),_N_E=e.O()}]);