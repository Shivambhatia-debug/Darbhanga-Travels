(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{3689:function(e,t,s){Promise.resolve().then(s.bind(s,3016))},3016:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(288),n=s(5192),a=s(3320),i=s(1676),o=s(7719),d=s(4497),l=s(9859),c=s(8202),u=s(1897),m=s(8902);function f(){let e=(0,a.useRouter)(),{toast:t}=(0,m.pm)(),[s,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{let t=localStorage.getItem("bookingInfo");t?f(JSON.parse(t)):e.push("/")},[e]);let[p,h]=(0,n.useState)(!1),g=async()=>{if(s){h(!0);try{var r;let n={service:"bus",from:s.from,to:s.to,date:new Date(s.date).toISOString().split("T")[0],passengers:s.passengers,customer_name:(null===(r=s.passengerDetails[0])||void 0===r?void 0:r.name)||"Customer",customer_phone:s.phone,customer_email:"",amount:0,status:"pending",payment_status:"pending",notes:"Bus Type: ".concat(s.type||"Not Selected"),passenger_details:s.passengerDetails,bus_number:s.bus||"",seat_type:s.type||""},a=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await a.json();a.ok?(t({title:"Booking Submitted Successfully! \uD83C\uDF89",description:"Your booking request has been sent. We'll contact you soon."}),localStorage.removeItem("bookingInfo"),setTimeout(()=>{e.push("/")},2e3)):t({title:"Error",description:i.message||"Failed to submit booking",variant:"destructive"})}catch(e){t({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}finally{h(!1)}}};return s?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsxs)(o.z,{variant:"ghost",className:"mb-6",onClick:()=>e.push("/"),children:[(0,r.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),(0,r.jsxs)(i.Zb,{className:"shadow-xl border-0",children:[(0,r.jsx)(i.Ol,{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,r.jsx)(l.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{className:"text-2xl",children:"Bus Booking Details"}),(0,r.jsx)("p",{className:"text-white/80 mt-1",children:"Review and confirm your booking"})]})]})}),(0,r.jsxs)(i.aY,{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Journey Details"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"From:"})," ",s.from]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"To:"})," ",s.to]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(s.date).toLocaleDateString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Bus Type:"})," ",s.type]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Passenger Details"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Total Passengers:"})," ",s.passengers]}),s.passengerDetails.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("p",{className:"font-medium",children:["Passenger ",t+1]}),(0,r.jsxs)("p",{children:["Name: ",e.name]}),(0,r.jsxs)("p",{children:["Age: ",e.age," years"]}),(0,r.jsxs)("p",{children:["Gender: ",e.gender]})]},t))]})]})]}),(0,r.jsx)("div",{className:"pt-6 border-t",children:(0,r.jsx)(o.z,{className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white font-semibold py-6 text-lg shadow-xl hover:shadow-2xl transition-all duration-300",onClick:g,disabled:p,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Submit Booking Request"]})})})]})]})]})})}):null}},7719:function(e,t,s){"use strict";s.d(t,{d:function(){return d},z:function(){return l}});var r=s(288),n=s(5192),a=s(8996),i=s(7940),o=s(6056);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:l=!1,...c}=e,u=l?a.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:n,size:i,className:s})),ref:t,...c})});l.displayName="Button"},1676:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var r=s(288),n=s(5192),a=s(6056);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},8902:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(5192);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6056:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var r=s(9773),n=s(7009);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,r.W)(t))}},4497:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9859:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},8202:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(6021).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[517,983,24,240,744],function(){return e(e.s=3689)}),_N_E=e.O()}]);